Solve â‡ {envâ€¿part ğ•Š data :
  util â† â€¢Import "/util.bqn"âˆ¾Ëœ"." env.VarâŒ¾â‹ˆ "BQN_LIB"
  data â†© 1(âŠ‘âˆ˜â†‘â‹ˆutil.ParseIntâˆ˜â†“)Â¨data
  {
    1=part ?
      +â—‹|Â´1â†“âŸ¨'E',0,0âŸ©{
        'N'â€¿d ğ•Š dirâ€¿yâ€¿x : dirâ€¿(y-d)â€¿x ;
        'S'â€¿d ğ•Š dirâ€¿yâ€¿x : dirâ€¿(y+d)â€¿x ;
        'E'â€¿d ğ•Š dirâ€¿yâ€¿x : dirâ€¿yâ€¿(x+d) ;
        'W'â€¿d ğ•Š dirâ€¿yâ€¿x : dirâ€¿yâ€¿(x-d) ;
        'L'â€¿d ğ•Š dirâ€¿yâ€¿x : d Ã·âŸœÂ¯90Ëœâ†© â‹„ ("NESW"âŠ‘Ëœ4|d+<â¼"NESW"âŠ’dir)â€¿yâ€¿x ;
        'R'â€¿d ğ•Š dirâ€¿yâ€¿x : d Ã·âŸœ90Ëœâ†© â‹„ ("NESW"âŠ‘Ëœ4|d+<â¼"NESW"âŠ’dir)â€¿yâ€¿x ;
        'F'â€¿d ğ•Š dirâ€¿yâ€¿x : dirâˆ¾yâ€¿x+dÃ—(âŠ‘âŸœâŸ¨Â¯1â€¿0,0â€¿1,1â€¿0,0â€¿Â¯1âŸ©)âŠ‘"NESW"âŠ’dir
      }Â´âŒ½data ;
    2=part ?
      +â—‹|Â´2â†“âŸ¨Â¯1,10,0,0âŸ©{
        'N'â€¿d ğ•Š yâ€¿xâ€¿syâ€¿sx : (y-d)â€¿xâ€¿syâ€¿sx ;
        'S'â€¿d ğ•Š yâ€¿xâ€¿syâ€¿sx : (y+d)â€¿xâ€¿syâ€¿sx ;
        'E'â€¿d ğ•Š yâ€¿xâ€¿syâ€¿sx : yâ€¿(x+d)â€¿syâ€¿sx ;
        'W'â€¿d ğ•Š yâ€¿xâ€¿syâ€¿sx : yâ€¿(x-d)â€¿syâ€¿sx ;
        'L'â€¿d ğ•Š yâ€¿xâ€¿syâ€¿sx : d Ã·âŸœÂ¯90Ëœâ†© â‹„ dyâ€¿dx â† (4|d)â—¶âŸ¨{âŸ¨ğ•¨,ğ•©âŸ©},{âŸ¨ğ•©,-ğ•¨âŸ©},{âŸ¨-ğ•¨,-ğ•©âŸ©},{âŸ¨-ğ•©,ğ•¨âŸ©}âŸ©Â´âŸ¨y-sy,x-sxâŸ©â‹„ (sy+dy)â€¿(sx+dx)â€¿syâ€¿sx ;
        'R'â€¿d ğ•Š yâ€¿xâ€¿syâ€¿sx : d Ã·âŸœ 90Ëœâ†© â‹„ dyâ€¿dx â† (4|d)â—¶âŸ¨{âŸ¨ğ•¨,ğ•©âŸ©},{âŸ¨ğ•©,-ğ•¨âŸ©},{âŸ¨-ğ•¨,-ğ•©âŸ©},{âŸ¨-ğ•©,ğ•¨âŸ©}âŸ©Â´âŸ¨y-sy,x-sxâŸ©â‹„ (sy+dy)â€¿(sx+dx)â€¿syâ€¿sx ;
        'F'â€¿d ğ•Š yâ€¿xâ€¿syâ€¿sx : dyâ€¿dx â† dÃ—âŸ¨y-sy,x-sxâŸ©â‹„ âŸ¨y+dy,x+dx,sy+dy,sx+dxâŸ©
      }Â´âŒ½data ;
    0
  }
}
