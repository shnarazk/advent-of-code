#!/usr/bin/env cbqn
envâ†{vâ‡â‰>âŠ‘âˆ˜âŠâŸœ'='âŠ¸(â†‘â‹ˆ1â†“â†“)Â¨{-Â¬(Â¬Ã—1++`)ğ•©=@+10}âŠ¸âŠ”1âŠ‘â€¢SH<"env"â‹„Varâ‡{âŠâŸœğ•©âŠ¸âŠâŸœ(âˆ¾âŸœğ•¨)Ëv}}
utilâ€¿locâ€¿âŸ¨LeftFillâŸ©â† â€¢ImportÂ¨"/util.bqn"â€¿"/loc.bqn"â€¿"/string.bqn"âˆ¾ËœÂ¨"." env.Var< "BQN_LIB"
aoc â† ".." env.VarâŒ¾â‹ˆ "AOC_REPO_DIR"
cw â† 8
cwloc â† 3
Fill â† {(cwâ†‘' ')âŠ¸LeftFill ğ•© ; ( ğ•¨â†‘' ')âŠ¸LeftFill ğ•©}
Add000 â† {
  z â† (Â¯1+â‰ s)-(s â† â€¢Repr(âŒŠ0.5âŠ¸+)âŒ¾(1000âŠ¸Ã—)ğ•©)âŠ¸âŠâŒ¾â‹ˆ'.'
  {
    Â¯1=z ? sâˆ¾".000" ;
    3>z ? sâˆ¾(3-z)â†‘"000" ;
    s
  }
}
âŸ¨yearâŸ©â€¿targets â† util.ParseIntÂ¨âŒ¾(1âŠ¸âŠ‘)1(â†‘â‹ˆâ†“)â€¢args
blacklist â† âˆ§{
  âŸ¨âŸ©â‰¡targets ? âŸ¨âŸ© ;
  !(âŒŠÂ´=âŒˆÂ´)Ã—Â¨targets
  (0>âŠ‘targets)â—¶âŸ¨(Â¬âˆ˜âˆŠâŸœtargets)âŠ¸/,-targetsâŸ©1+â†•25
}
y â† "2020" LeftFill year
result â† {ğ•Š day :
  d â† "00" LeftFill â€¢Fmt day
  progfile â† aocâˆ¾"/bqn/"âˆ¾yâˆ¾"/day"âˆ¾dâˆ¾".bqn"
  nl â† â€¢file.Existsâ—¶âŸ¨"-",loc.LinesOfCodeâŸ© progfile
  {
    âˆŠâŸœblacklistâŒ¾â‹ˆday ? dayâ€¿nlâ€¿"skipped"â€¿"skipped" ;
    datafile â† aocâˆ¾"/data/"âˆ¾yâˆ¾"/input-day"âˆ¾dâˆ¾".txt"
    âˆ§Â´â€¢file.ExistsÂ¨progfileâ€¿datafile ?
    util.Progress "day "âˆ¾d
    bqn â† â€¢Import progfile
    part1 â† (envâ€¿1âŠ¸bqn.Solve)â€¢_timed â€¢FLines datafile
    part2 â† (envâ€¿2âŠ¸bqn.Solve)â€¢_timed â€¢FLines datafile
    dayâˆ¾nlâˆ¾Fillâˆ˜Add000Â¨part1â€¿part2 ;
    dayâ€¿nlâ€¿"N/A"â€¿"N/A"
  }
}Â¨1+â†•25

â€¢Out ""
â€¢Out "```"
â€¢Out Â¯1â†“1âŠ‘â€¢SH "cbqn"â€¿"--version"
â€¢Out "```"
â€¢Out ""
â€¢Out "| y"âˆ¾yâˆ¾"  | "âˆ¾(cwloc Fill "LoC")âˆ¾" | "âˆ¾(Fill "p1 (sec)")âˆ¾" | "âˆ¾(Fill "p2 (sec)")âˆ¾" |"
â€¢Out "|--------|"âˆ¾(('-'+(2+cwloc)â†‘0)LeftFill ":")âˆ¾"|"âˆ¾(('-'+(2+cw)â†‘0)LeftFill ":")âˆ¾"|"âˆ¾(('-'+(2+cw)â†‘0)LeftFill ":")âˆ¾"|"
{dayâ€¿linesâ€¿part1â€¿part2 :
  â€¢Out "| day "âˆ¾("00" LeftFill day)âˆ¾" | "âˆ¾(cwloc Fill lines)âˆ¾" | "âˆ¾(Fill part1)âˆ¾" | "âˆ¾(Fill part2)âˆ¾" |"}Â¨result
â€¢Out ""
