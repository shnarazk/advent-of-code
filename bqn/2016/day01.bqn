Solve â‡ {envâ€¿part ğ•Š data :
  utilâ€¿âŸ¨hashsetâŸ© â† â€¢ImportÂ¨ "/util.bqn"â€¿"/hashset.bqn"âˆ¾ËœÂ¨<"." env.VarâŒ¾â‹ˆ "BQN_LIB"
  data â†© ((1-2Ã—'L'âŠ¸=)âˆ˜âŠ‘â‹ˆutil.ParseInt)Â¨ ", " util.SplitâŠ‘data
  {
    1=part ? +â—‹|Â´1âŠ‘0â€¿âŸ¨0,0âŸ©{dâ€¿l ğ•Š dirâ€¿pos : âŸ¨dir 4âŠ¸|âˆ˜(dâŠ¸+) â†© ,pos+lÃ—dirâŠ‘âŸ¨Â¯1â€¿0,0â€¿1,1â€¿0,0â€¿Â¯1âŸ©âŸ©}Â´âŒ½data ;
    +â—‹|Â´2âŠ‘{flagâ€¿dirâ€¿posâ€¿routeâ€¿set :
      âŸ¨dâ€¿lâŸ©â€¿remain â† 1(â†‘â‹ˆâ†“)route
      dir 4âŠ¸|âˆ˜(dâŠ¸+) â†©
      1â†“{lâ€¿flagâ€¿dirâ€¿posâ€¿routeâ€¿set :
        pos â†© pos+dirâŠ‘âŸ¨Â¯1â€¿0,0â€¿1,1â€¿0,0â€¿Â¯1âŸ©
        {set.Has pos ? âŸ¨0,0,dir,pos,remain,setâŸ© ; âŸ¨Â¯1+l,1,dir,pos,remain,set.Set posâŸ©}
      }â€¢_while_(0<âŠ‘)âŸ¨l,1,dir,pos,remain,setâŸ©
    }â€¢_while_âŠ‘âŸ¨1,0,0â€¿0,data,HashsetâŸ¨0â€¿0âŸ©âŸ©
  }
}
