#!/usr/bin/env bqn
Split â† { F letters:
    records â† âŸ¨1, âŸ¨""âŸ©, âŸ¨âŸ©âŸ© {
        '[' ğ•Š ğ•© : âŸ¨Â¯1Ã—(âŠ‘ğ•©)    , 1âŠ‘ğ•©               , âŸ¨""âŸ©âˆ¾(2âŠ‘ğ•©)       âŸ©;
        ']' ğ•Š ğ•© : âŸ¨1+(Â¯1Ã—(âŠ‘ğ•©)), âŸ¨""âŸ©âˆ¾(1âŠ‘ğ•©)        , 2âŠ‘ğ•©              âŸ©;
        0 < âŠ‘ğ•© ?  âŸ¨âŠ‘ğ•©         , âŸ¨(ğ•¨âˆ¾âŠ‘1âŠ‘ğ•©)âŸ©âˆ¾(1â†“1âŠ‘ğ•©), 2âŠ‘ğ•©              âŸ©;
                  âŸ¨âŠ‘ğ•©         , 1âŠ‘ğ•©               , âŸ¨(ğ•¨âˆ¾âŠ‘2âŠ‘ğ•©)âŸ©âˆ¾(1â†“2âŠ‘ğ•©)âŸ©
    }Â´ âŒ½ letters
    (âŒ½Â¨1âŠ‘records)â€¿(âŒ½Â¨2âŠ‘records)
}

# Part 1: TLS #####################################
CheckTLS â† {
    CheckWord â† { (0âŠ‘ğ•© = 3âŠ‘ğ•©) âˆ§ (1âŠ‘ğ•© = 2âŠ‘ğ•©) âˆ§ (0âŠ‘ğ•© â‰  1âŠ‘ğ•©) }
    CheckChunk â† { 4 > â‰ ğ•© ? 0; 0 < âŒˆÂ´CheckWordÂ¨ <Ë˜4â†•ğ•© }
    (0 < âŒˆÂ´CheckChunkÂ¨ 0âŠ‘ğ•©) âˆ§ (0 = âŒˆÂ´CheckChunkÂ¨ 1âŠ‘ğ•©)
}
example â† âŸ¨ "abba[mnop]qrst", "abcd[bddb]xyyx", "aaaa[qwer]tyui", "ioxxoj[asdfgh]zxcvbn" âŸ©
a_example â† 5â†‘ â¥Š â€¢FLines "../data/2016/input-day07.txt"
â€¢Show example
â€¢Show â¥Š>SplitÂ¨ example
â€¢Show (CheckTLSâˆ˜Split)Â¨ example
â€¢Show +Â´(CheckTLSâˆ˜Split)Â¨ â¥Š â€¢FLines "../data/2016/input-day07.txt"

# Part 2: SSL #####################################
CheckSSL â† {
    CheckWord â† { (0âŠ‘ğ•© = 2âŠ‘ğ•©) âˆ§ (0âŠ‘ğ•© â‰  1âŠ‘ğ•©) }
    Pickup â† { 3 > â‰ ğ•© ? 0; CheckWordÂ¨âŠ¸/ <Ë˜3â†•ğ•© }
    CrossCheck â† { w â† â¥Š>ğ•¨ â‹„ x â† â¥Š>ğ•© â‹„ (0âŠ‘w â‰  '_') âˆ§ (0âŠ‘w = 1âŠ‘x) âˆ§ (1âŠ‘w = 0âŠ‘x) }
    0âŒˆÂ´â¥Š(âˆ¾Â´PickupÂ¨ 0âŠ‘ğ•©) CrossCheckâŒœ (âˆ¾Â´PickupÂ¨ 1âŠ‘ğ•©)
}
example2 â† âŸ¨ "aba[bab]xyz", "xyx[xyx]xyx", "aaa[kek]eke", "zazbz[bzb]cdb" âŸ©
# example2 â† 5â†‘ â¥Š â€¢FLines "../data/2016/input-day07.txt"
â€¢Show example2
â€¢Show >SplitÂ¨ example2
â€¢Show (CheckSSLâˆ˜Split)Â¨ example2
â€¢Show +Â´(CheckSSLâˆ˜Split)Â¨ â¥Š â€¢FLines "../data/2016/input-day07.txt"
