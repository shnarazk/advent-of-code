lib â† â€¢Import"../lib.bqn"

Solve â‡ {part Solve data :
  Facets â† {xâ€¿yâ€¿z :
    [âŸ¨x-0.5,y,zâŸ©,âŸ¨x+0.5,y,zâŸ©,âŸ¨x,y-0.5,zâŸ©,âŸ¨x,y+0.5,zâŸ©,âŸ¨x,y,z-0.5âŸ©,âŸ¨x,y,z+0.5âŸ©]
  }
  "â‰ all" lib.Debugâ‰  all â† â¥Š<Ë˜âˆ¾FacetsÂ¨lib.ParseIntsÂ¨data
  {1=part ? (â‰ -(2âŠ¸Ã—âˆ˜(-â—‹â‰ âŸœâ·)))all ;
   2=part ?
     dup â† (Â¬âˆŠ)âŠ¸/all
     # Change to a directed space
     Lift â† {ğ•Š xâ€¿yâ€¿z :
       {
         xâ‰ âŒŠx ? âŸ¨x+0.5,y,z,3âŸ©â€¿âŸ¨x-0.5,y,z,2âŸ© ;
         yâ‰ âŒŠy ? âŸ¨x,y+0.5,z,5âŸ©â€¿âŸ¨x,y-0.5,z,4âŸ© ;
         zâ‰ âŒŠz ? âŸ¨x,y,z+0.5,7âŸ©â€¿âŸ¨x,y,z-0.5,6âŸ© ;
         !0
       }
     }
     DirectedFacets â† âˆ¾Â¨âŸœ(2+â†•6)<
     dirÂ¯all â† âˆ¾DirectedFacetsÂ¨lib.ParseIntsÂ¨data
     mask â† dirÂ¯allâˆŠâˆ¾LiftÂ¨dup
     "â‰ surface"lib.Debugâ‰ surface â† (Â¬mask)/dirÂ¯all
     Propagate â† {
       ğ•Š ğ•© : surface ğ•Š ğ•© ;
       set ğ•Š xâ€¿yâ€¿zâ€¿s :
         cands â† â¥Š<Ë˜{
           ğ•Š 2 : [
             âŸ¨âŸ¨x+1,y+1,z  ,5âŸ©,âŸ¨x  ,y+1,z  ,2âŸ©,âŸ¨x  ,y  ,z  ,4âŸ©âŸ©
             âŸ¨âŸ¨x+1,y-1,z  ,4âŸ©,âŸ¨x  ,y-1,z  ,2âŸ©,âŸ¨x  ,y  ,z  ,5âŸ©âŸ©
             âŸ¨âŸ¨x+1,y  ,z+1,7âŸ©,âŸ¨x  ,y  ,z+1,2âŸ©,âŸ¨x  ,y  ,z  ,6âŸ©âŸ©
             âŸ¨âŸ¨x+1,y  ,z-1,6âŸ©,âŸ¨x  ,y  ,z-1,2âŸ©,âŸ¨x  ,y  ,z  ,7âŸ©âŸ©
           ] ;
           ğ•Š 3 : [
             âŸ¨âŸ¨x-1,y+1,z  ,5âŸ©,âŸ¨x  ,y+1,z  ,3âŸ©,âŸ¨x  ,y  ,z  ,4âŸ©âŸ©
             âŸ¨âŸ¨x-1,y-1,z  ,4âŸ©,âŸ¨x  ,y-1,z  ,3âŸ©,âŸ¨x  ,y  ,z  ,5âŸ©âŸ©
             âŸ¨âŸ¨x-1,y  ,z+1,7âŸ©,âŸ¨x  ,y  ,z+1,3âŸ©,âŸ¨x  ,y  ,z  ,6âŸ©âŸ©
             âŸ¨âŸ¨x-1,y  ,z-1,6âŸ©,âŸ¨x  ,y  ,z-1,3âŸ©,âŸ¨x  ,y  ,z  ,7âŸ©âŸ©
           ] ;
           ğ•Š 4 : [
             âŸ¨âŸ¨x+1,y+1,z  ,3âŸ©,âŸ¨x+1,y  ,z  ,4âŸ©,âŸ¨x  ,y  ,z  ,2âŸ©âŸ©
             âŸ¨âŸ¨x-1,y+1,z  ,2âŸ©,âŸ¨x-1,y  ,z  ,4âŸ©,âŸ¨x  ,y  ,z  ,3âŸ©âŸ©
             âŸ¨âŸ¨x  ,y+1,z+1,7âŸ©,âŸ¨x  ,y  ,z+1,4âŸ©,âŸ¨x  ,y  ,z  ,6âŸ©âŸ©
             âŸ¨âŸ¨x  ,y+1,z-1,6âŸ©,âŸ¨x  ,y  ,z-1,4âŸ©,âŸ¨x  ,y  ,z  ,7âŸ©âŸ©
           ] ;
           ğ•Š 5 : [
             âŸ¨âŸ¨x+1,y-1,z  ,3âŸ©,âŸ¨x+1,y  ,z  ,5âŸ©,âŸ¨x  ,y  ,z  ,2âŸ©âŸ©
             âŸ¨âŸ¨x-1,y-1,z  ,2âŸ©,âŸ¨x-1,y  ,z  ,5âŸ©,âŸ¨x  ,y  ,z  ,3âŸ©âŸ©
             âŸ¨âŸ¨x  ,y-1,z+1,7âŸ©,âŸ¨x  ,y  ,z+1,5âŸ©,âŸ¨x  ,y  ,z  ,6âŸ©âŸ©
             âŸ¨âŸ¨x  ,y-1,z-1,6âŸ©,âŸ¨x  ,y  ,z-1,5âŸ©,âŸ¨x  ,y  ,z  ,7âŸ©âŸ©
           ] ;
           ğ•Š 6 : [
             âŸ¨âŸ¨x+1,y  ,z+1,3âŸ©,âŸ¨x+1,y  ,z  ,6âŸ©,âŸ¨x  ,y  ,z  ,2âŸ©âŸ©
             âŸ¨âŸ¨x-1,y  ,z+1,2âŸ©,âŸ¨x-1,y  ,z  ,6âŸ©,âŸ¨x  ,y  ,z  ,3âŸ©âŸ©
             âŸ¨âŸ¨x  ,y+1,z+1,5âŸ©,âŸ¨x  ,y+1,z  ,6âŸ©,âŸ¨x  ,y  ,z  ,4âŸ©âŸ©
             âŸ¨âŸ¨x  ,y-1,z+1,4âŸ©,âŸ¨x  ,y-1,z  ,6âŸ©,âŸ¨x  ,y  ,z  ,5âŸ©âŸ©
           ] ;
           ğ•Š 7 : [
             âŸ¨âŸ¨x+1,y  ,z-1,3âŸ©,âŸ¨x+1,y  ,z  ,7âŸ©,âŸ¨x  ,y  ,z  ,2âŸ©âŸ©
             âŸ¨âŸ¨x-1,y  ,z-1,2âŸ©,âŸ¨x-1,y  ,z  ,7âŸ©,âŸ¨x  ,y  ,z  ,3âŸ©âŸ©
             âŸ¨âŸ¨x  ,y+1,z-1,5âŸ©,âŸ¨x  ,y+1,z  ,7âŸ©,âŸ¨x  ,y  ,z  ,4âŸ©âŸ©
             âŸ¨âŸ¨x  ,y-1,z-1,4âŸ©,âŸ¨x  ,y-1,z  ,7âŸ©,âŸ¨x  ,y  ,z  ,5âŸ©âŸ©
           ] ;
           ğ•Š n : !0
         } s
         âˆ¾((0<â‰ )âŠ¸â†‘(âˆŠâŸœset)âŠ¸/)Â¨cands
     }
     "statrt at" lib.Debug 1â†‘âˆ§surface
     âŸ¨âŸ©{
       checked Rec âŸ¨âŸ©  : â‰ â·checked ;
       checked Rec new :
         np â† â‰ prop â† â·âˆ¾PropagateÂ¨new
         checked (â·newâŠ¸âˆ¾)â†©
         "propagated" lib.Debug â‰ prop â†© â·(Â¬âˆŠâŸœcheckedËœ)âŠ¸/prop
         checked Rec prop
     } 1â†‘âˆ§surface
   ;
     !0
  }
}
