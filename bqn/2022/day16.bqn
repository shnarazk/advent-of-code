#!/usr/bin/env cbqn
âŸ¨DataFile,ParseInts,SwapâŸ© â† â€¢Import "../lib.bqn"
â€¢Show data â† (Swap ParseIntsâˆ¾{((<1âŠ¸âŠ‘)âˆ¾9âŠ¸â†“)(','âŠ¸â‰ Â¨âŠ¸/)Â¨" "âŠ¸((âŠ¢-ËœÂ¬Ã—Â·+`Â»âŠ¸<)âˆ˜âˆŠËœâŠ”âŠ¢)ğ•©})Â¨ â€¢Flines "data/2022/input-day16.txt" DataFile âŸ¨âŸ© # â€¢args
â€¢Show nodes â† âˆ§â·âŠ‘Â¨data
ProductIndices â† {dâ†ğ•©â‹„({(((âŠ‘ğ•©)âŠ¸â‹ˆ)â‹ˆ(â‹ˆâŸœ(1âŠ‘ğ•©)))Â¨â†•d}â‹ˆ)âŒœËœâ†•ğ•©}
Product â† {(+Â´((ğ•©âŠ‘Ëœ1âŠ¸âŠ‘)Ã—(ğ•¨âŠ‘Ëœ0âŠ¸âŠ‘))Â¨)âŒœ ProductIndices â‰ ğ•¨}
â€¢Show pairs â† âˆ§âˆ¾(âŠ(âˆ¾â—‹<)Â¨(2âŠ¸â†“))Â¨data
# âŸ¨next, prevâŸ© â† ((1âŠ¸+)(â‹ˆâ—‹(nâŠ¸|nâŠ¸+))(Â¯1âŠ¸+)) â†•n
# Shift â† { ğ•Š i: 
#   j â† i
#   step â† (Â¯1+n)||v â† iâŠ‘data 
#   j â†© {
#     1=Ã—v ? {aâ†ğ•©âŠ‘nextâ‹„{a=i?aâŠ‘next;a}}âŸstep j;
#     Â¯1=Ã—v? prevâŠ‘Ëœ{aâ†ğ•©âŠ‘prevâ‹„{a=i?aâŠ‘prev;a}}âŸstep j;
#     j
#   }
#   {
#     0=step ? @;
#     âŸ¨prev_i,next_i,next_jâŸ© â† âŸ¨iâŠ‘prev,iâŠ‘next,jâŠ‘nextâŸ©
#     next â†© next_jË™âŒ¾(iâŠ¸âŠ‘) iË™âŒ¾(jâŠ¸âŠ‘) next_iË™âŒ¾(prev_iâŠ¸âŠ‘) next
#     prev â†© prev_iË™âŒ¾(next_iâŠ¸âŠ‘) jË™âŒ¾(iâŠ¸âŠ‘) iË™âŒ¾(next_jâŠ¸âŠ‘) prev
#   }
# }
# Trace â† { dataâŠ‘Ëœ{ğ•©âŠ‘next}âŸğ•© âŠ‘data âŠ <0 }
# ShiftÂ¨ â†•n
# â€¢Show +Â´TraceÂ¨ 1000â€¿2000â€¿3000 

# data â†© 811589153Ã—Â¨ data
# âŸ¨next, prevâŸ© â†© ((1âŠ¸+)(â‹ˆâ—‹(nâŠ¸|nâŠ¸+))(Â¯1âŠ¸+)) â†•n
# n {ShiftÂ¨ â†•ğ•¨}âŸ10 0
# â€¢Show +Â´TraceÂ¨ 1000â€¿2000â€¿3000 
