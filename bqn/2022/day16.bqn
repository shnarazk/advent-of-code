#!/usr/bin/env cbqn
âŸ¨DataFile,ParseInts,SwapâŸ© â† â€¢Import "../lib.bqn"
âŸ¨_to_heapâŸ© â† â€¢Import "../heap.bqn"
data â† (Swap ParseIntsâˆ¾{((<1âŠ¸âŠ‘)âˆ¾9âŠ¸â†“)(','âŠ¸â‰ Â¨âŠ¸/)Â¨" "âŠ¸((âŠ¢-ËœÂ¬Ã—Â·+`Â»âŠ¸<)âˆ˜âˆŠËœâŠ”âŠ¢)ğ•©})Â¨ â€¢Flines "data/2022/input-day16.txt" DataFile âŸ¨âŸ© # â€¢args
â€¢Show nodes â† âˆ§â·âŠ‘Â¨data
Product â† +Ëâˆ˜Ã—â‰1â€¿âˆ
Distance â† âŒŠËâˆ˜+â‰1â€¿âˆ
label_pairs â† âˆ§âˆ¾(âŠ(âˆ¾â—‹<)Â¨(2âŠ¸â†“))Â¨data
â€¢Show pairs â† {ğ•Š âŸ¨a,bâŸ©: âŸ¨âŠ‘nodesâŠ’<a,âŠ‘nodesâŠ’<bâŸ©}Â¨label_pairs
dist â† { ğ•¨â‰¡ğ•© ? 0 ; âŠ‘pairsâˆŠËœâ‹ˆâŸ¨ğ•¨,ğ•©âŸ© ? 1; âˆ}âŒœËœâ†•â‰ nodes
# â€¢Show dist DistanceâŸ(â‰ nodes) dist
H â† <_to_heap
â€¢Show h.Dump @
! 0=âŠ‘nodesâŠ<"AA"
â€¢Show initial_state â† âŸ¨0, 0, 0, â†•â‰ nodesâŸ©
h.Push initial_state
visited â† âŸ¨âŸ©
Next â† { F âŸ¨time, flow, pos, statesâŸ©:
  0
}

Expand â† { F heap: 
  ! Â¬heap.Empty @ 
  state â† heap.Pop @
  { 26âŠ¸â‰¤âŠ‘state ? state; Next state }
}
