#!/usr/bin/env cbqn
âŸ¨DataFile, ParseIntsâŸ© â† â€¢Import "../lib.bqn"
map â† '0'-ËœËœËœ â€¢FLines "data/2022/input-day08.txt" DataFile â€¢args
map_height â† â‰ map
map_width â† â‰ âŠ‘map
â€¢Show âŸ¨map_height, map_widthâŸ©
At â† { F âŸ¨x, yâŸ© : yâŠ‘xâŠ‘map }

Sight â† {4â€¿âˆ˜â¥ŠâŸ¨(ğ•¨âŠ¸â‹ˆÂ¨â†•ğ•©),(ğ•¨âŠ¸â‹ˆÂ¨(1+ğ•©)â†“â†•map_height),(â‹ˆâŸœğ•©Â¨â†•ğ•¨),(â‹ˆâŸœğ•©Â¨(1+ğ•¨)â†“â†•map_width)âŸ©}
# Visible â† {0âŒˆÂ´(ğ•¨>At)Â¨ğ•©} 
# Part1 â† { F âŸ¨x, yâŸ© :
#   dirs â† x Sight y
#   h â† At âŸ¨x, yâŸ©
#   result â† âˆ¨Â´â¥Šh VisibleÂ¨ dirs
#   â€¢Show âŸ¨x, y, resultâŸ©
#   result
# }
Invisible â† {0âŒˆÂ´(ğ•¨â‰¤At)Â¨ğ•©} 
Part1 â† { F âŸ¨x, yâŸ© :
  dirs â† x Sight y
  h â† At âŸ¨x, yâŸ©
  Â¬âˆ§Â´â¥Šh InvisibleÂ¨ dirs
}
â€¢Show +Â´Part1Â¨â¥Š(â†•map_width) â‹ˆâŒœ (â†•map_height)

# â€¢Show +Â´(100000âŠ¸â‰¥)Â¨âŠ¸/ lInes
# used â† âŒˆÂ´ lines
# need â† used - 40000000 
# â€¢Show âˆ§(needâŠ¸â‰¤)Â¨âŠ¸/ lines
