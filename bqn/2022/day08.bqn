#!/usr/bin/env cbqn
âŸ¨DataFile, _uncurryâŸ© â† â€¢Import "../lib.bqn"
map â† (â‹ˆËœâˆ˜âˆšâˆ˜â‰ )âŠ¸â¥Šâˆ¾'0'-ËœËœËœ â€¢FLines "data/2022/input-day08.txt" DataFile â€¢args
Sight â† {âŸ¨âŒ½(ğ•¨âŠ¸â‹ˆÂ¨â†•ğ•©),(ğ•¨âŠ¸â‹ˆÂ¨(1+ğ•©)â†“â†•âŠ‘â‰¢map),âŒ½(â‹ˆâŸœğ•©Â¨â†•ğ•¨),(â‹ˆâŸœğ•©Â¨(1+ğ•¨)â†“â†•1âŠ‘â‰¢map)âŸ©}_uncurry

Part1 â† {
  Visible â† {w F xs: âˆ§Â´{wâ‰¥â—‹(mapË™âŠ¸(âŠ‘Ëœ))ğ•©}Â¨xs}
  âˆ¨Â´{w F dirs: {w Visible ğ•©}Â¨dirs}âŸœSight ğ•©
}
â€¢Show +Â´Part1Â¨â¥Š(â‹ˆâŒœâ—‹â†•)_uncurry â‰¢map

Part2 â† {
  Blocking â† {w F xs: {0=â‰ xs ? 0; i â† âŠ‘âŸ¨1âŸ©âŠËœ{wâ‰¤â—‹(mapË™âŠ¸(âŠ‘Ëœ))ğ•©}Â¨xsâ‹„ i<â‰ xs ? 1+i; â‰ xs}}
  Ã—Â´{w F dirs: {w Blocking ğ•©}Â¨dirs}âŸœSight ğ•©
}
â€¢Show âŒˆÂ´Part2Â¨â¥Š(â‹ˆâŒœâ—‹â†•)_uncurry â‰¢map
