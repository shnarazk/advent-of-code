lib â† â€¢Import "../lib.bqn"
Solve â‡ { part ğ•Š line:
  data â† >{
    is â† lib.ParseInts ğ•©
    4â€¿4â¥ŠâŸ¨
          1âŠ‘is,    0,    0,   0,
          2âŠ‘is,    0,    0,   0,
          3âŠ‘is, 4âŠ‘is,    0,   0,
          5âŠ‘is,    0, 6âŠ‘is,   0,
        âŸ©
  }Â¨ line
  Examine â† { u ğ•Š n:
    bestâ€¿bpâ€¿upto â† âŸ¨0,nâŠdata,-uâŸ©
    masksâ€¿limits â† âŸ¨0<Ë˜bp,0â€¿0â€¿0â€¿âˆâŒˆâŒˆÂ´Ë˜â‰bpâŸ©
    Expand â† {
      ğ•Š âŸ¨âŸ©: best;
      ğ•Š to_visit:
        ğ•Š âŸ¨âŸ© { timeâ€¿resourcesâ€¿robots ğ•Š next:
          { ğ•Š i:
            upto< t â† time- w â† 1+âŒˆâŒˆÂ´(iâŠmasks)/robotsÃ·Ëœ(n â† iâŠbp)(0âŠ¸âŒˆ-)resources ?
              { Â¬âˆ¨Â´(âˆ§Â´ğ•©âŠ¸â‰¤)Â¨next ? next âŸ¨ğ•©âŸ©âŠ¸âˆ¾ â†© ;@ } tâˆ¾(n-Ëœresources+wÃ—robots)âˆ¾((1âŠ¸+)âŒ¾(iâŠ¸âŠ‘)robots)
            ;
              best ((Â¯1âŠ‘resources)+(time-upto)Ã—Â¯1âŠ‘robots)âŠ¸âŒˆ â†©
          }Â¨{robots<â—‹(ğ•©âŠ¸âŠ‘)limits }Â¨âŠ¸/â†•4
          next
        }Â´{âŸ¨âŠ‘ğ•©,4â†‘1â†“ğ•©,5â†“ğ•©âŸ©}Â¨to_visit
    }
    (â€¢Fmt n) lib.Debug Expand âŸ¨âŸ¨0âŸ©âˆ¾âŸ¨0,0,0,0âŸ©âˆ¾âŸ¨1,0,0,0âŸ©âŸ© # âŸ¨time,resources,robotsâŸ©
  }
  {
    1=part ? +Â´ 24 ((1âŠ¸+)Ã—Examine)Â¨â†•â‰ data
    ; 2=part ? Ã—Â´ 32 ExamineÂ¨â†•3
    ; "â‰¢data" lib.Debug â‰¢data
  }
}
