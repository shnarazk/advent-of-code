#!/usr/bin/env cbqn
lib â† â€¢Import "../lib.bqn"
# âŸ¨lines,status,monkeysâŸ© â‡
lines â† â€¢FLines "data/2022/input-day12.txt" lib.DataFile âŸ¨âŸ© # â€¢args
â€¢Show lines ((â‰ â‹ˆ(â‰ âŠ‘))â¥Šâˆ¾) â†©
IndexOf â† {âŠ‘(ğ•¨âŠ¸=âŠ‘âŸœğ•©)Â¨âŠ¸/â¥Šâ†•Â·â‰¢ ğ•©}
â€¢Show 'S' IndexOf lines
â€¢Show 'E' IndexOf lines

# {k â† 7-7|â‰ linesâ‹„ 0<k ? lines â†© linesâˆ¾âŸ¨âŸ©Ë™Â¨â†•k; @}
# lines â†© âˆ˜â€¿7 â¥Šlines
# Convert â† { ğ•Š noâ€¿itemsâ€¿updateâ€¿testâ€¿thenâ€¿elseâ€¿end:
#   u â† 19â†“update
#   <âŸ¨
#     lib.ParseInt no,
#     0 (+âŸœ(2âŠ¸Ã—))Â´ ("+*" âˆŠ u), # op-code encoded to 1 or 2
#     {2=+Â´("old"âŠ¸(lib.StartsWithËœ))Â¨â†“u ? Â¯1 ; lib.ParseInt u}, # oprand
#     lib.ParseInt test,
#     lib.ParseInt then,
#     lib.ParseInt else,
#   âŸ©
# }
# status â† (<Â·lib.ParseInts 1âŠ¸âŠ‘)Ë˜lines
# inspects â† 0Ë™Â¨â†•â‰  monkeys â† â¥ŠConvertË˜ lines
# limit â† â€¢math.lcmÂ´(3âŠ¸âŠ‘)Â¨monkeys
# Updater â† { noâ€¿opâ€¿argâ€¿testâ€¿thenâ€¿else ğ•Š statusâ€¿insâ€¿part:
#   âŸ¨s,nâŸ© â† âŸ¨status,â‰ noâŠ‘statusâŸ©
#   { ğ•Š item:
#     item â†© partË™â—¶âŸ¨âŒŠ3âŠ¸(Ã·Ëœ),limitâŠ¸|âŸ©op{1 ğ•Š Â¯1: itemÃ—2 ; 1 ğ•Š ğ•©: item+ğ•© ; 2 ğ•Š Â¯1: itemâ‹†2; 2 ğ•Š ğ•©: itemÃ—ğ•©} arg
#     s â†© (âˆ¾âŸœâŸ¨itemâŸ©)âŒ¾(((0=test|item)âŠ‘âŸ¨else,thenâŸ©)âŠ¸âŠ‘) s
#   }Â¨noâŠ‘status
#   âŸ¨âŸ¨âŸ©Ë™âŒ¾(noâŠ¸âŠ‘) s,(nâŠ¸+)âŒ¾(noâŠ¸âŠ‘) ins, partâŸ©
# }
# â€¢Show Ã—Â´2â†‘âˆ¨ 1âŠ‘{ğ•© UpdaterÂ´âŒ½monkeys}âŸ20âŸ¨status,inspects,0âŸ©
# â€¢Show Ã—Â´2â†‘âˆ¨ 1âŠ‘{ğ•© UpdaterÂ´âŒ½monkeys}âŸ10000âŸ¨status,inspects,1âŸ©
