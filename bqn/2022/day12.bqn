#!/usr/bin/env cbqn
lib â† â€¢Import "../lib.bqn"
# âŸ¨lines,status,monkeysâŸ© â‡
lines â† â€¢FLines "data/2022/input-day12.txt" lib.DataFile âŸ¨âŸ© # â€¢args
shape â† (â‰ â‹ˆ(â‰ âŠ‘)) lines
sea_level â† Â¯100 
map â† (shapeâŠ¸â¥Š)âˆ˜(sea_levelâŠ¸+'a'âŠ¸(-Ëœ))âˆ˜âˆ¾ lines
IndexOf â† {âŠ‘(ğ•¨âŠ¸=âŠ‘âŸœğ•©)Â¨âŠ¸/â¥Šâ†•Â·â‰¢ ğ•©}
lib.color.green lib.term.Println start â† (sea_level+'S'-'a') IndexOf map
lib.color.green lib.term.Println end â† (sea_level+'E'-'a') IndexOf map
â€¢Show startâŠ¸âŠ‘ map
map sea_levelË™âŒ¾(startâŠ¸âŠ‘) â†©
map (sea_level+'z'-'a')âŒ¾(endâŠ¸âŠ‘) â†©
Debug â† {t ğ•Š ğ•©:
  lib.term.Up 1+â‰ ğ•©
  {"" lib.term.Outlnâˆ¾{ ğ•Š c: ({câ‰¥t ? (80)â€¿(âŒŠ255-255âŒŠâŒŠ2500Ã·âˆšc)â€¿(âŒŠ255âŒŠ30Ã—1.8â‹†â¼c); 100â€¿100â€¿100} lib.color.RGB 0) lib.color.Out " "}Â¨ğ•©â‹„ âŸ¨âŸ© }Ë˜ğ•©
 }
Choose â† { other ğ•Š self :
  {
   self âˆ§â—‹(0âŠ¸<) other ? selfâŒŠ1+other; 
   (0<other)âˆ§(other<âˆ) ? 1+other;
    self
  }
}
MakeNeighbor â† {(âŒ½â‰)âŸ(4-ğ•©)(âˆâŠ¸Â»Ë˜)(âŒ½â‰)âŸğ•© ğ•¨}
Neighbors â† {(ğ•©âŠ¸MakeNeighbor)Â¨ â†•4}
reachables â† {(â‰¢map)â¥Š(Â¯1+â¥Šmap)â‰¤â¥Šğ•©}Â¨ Neighbors map
MaskedNeighbors â† reachables Ã— {(ğ•©âŠ¸MakeNeighbor)Â¨ â†•4}
m â† 1Ë™âŒ¾(startâŠ¸âŠ‘) map
lib.While {ğ•¤â‹„ 0>endâŠ‘m}â€¿{ğ•¤â‹„ 0 Debug m (ChooseÂ¨Ë˜Â´âŸœ MaskedNeighbors) â†©} 
â€¢Show ans1 â† Â¯1+endâŠ‘m # we start the loop with 1.

n â† { sea_level=ğ•© ? 1; ğ•©}Â¨Ë˜ map
lib.While {ğ•¤â‹„ 0>endâŠ‘n}â€¿{ğ•¤â‹„ 0 Debug n (ChooseÂ¨Ë˜Â´âŸœ MaskedNeighbors) â†©} 
â€¢Show ans1â‹ˆÂ¯1+endâŠ‘n # we start the loop with 1.
