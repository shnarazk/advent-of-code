#!/usr/bin/env cbqn
lib â† â€¢Import "../lib.bqn"
âŸ¨lines,init_status,monkeysâŸ© â‡
lines â† â€¢FLines "data/2022/input-day11.txt" lib.DataFile â€¢args
{k â† 7-7|â‰ linesâ‹„ 0<k ? lines â†© linesâˆ¾âŸ¨âŸ©Ë™Â¨â†•k; @}
lines â†© âˆ˜â€¿7 â¥Šlines
Convert â† { ğ•Š noâ€¿itemsâ€¿updateâ€¿testâ€¿thenâ€¿elseâ€¿end:
  u â† 19â†“update
  <âŸ¨
    lib.ParseInt no,
    0 (+âŸœ(2âŠ¸Ã—))Â´ ("+*" âˆŠ u), # op-code
    {2=+Â´("old"âŠ¸(lib.StartsWithËœ))Â¨â†“u ? Â¯1 ; lib.ParseInt u}, # oprand
    lib.ParseInt test,
    lib.ParseInt then,
    lib.ParseInt else,
  âŸ©
}
lib.color.blue lib.term.Println init_status â† â¥Š(lib.ParseIntsâŠ‘)Ë˜lines
lib.color.blue lib.term.Println monkeys â† â¥ŠConvertË˜ lines
Updater â† { noâ€¿opâ€¿argâ€¿testâ€¿thenâ€¿else ğ•Š status:
  s â† status
  (180â€¿180â€¿240 lib.color.RGB 10â€¿10â€¿30) lib.term.Outln "somothing"
  { ğ•Š item:
    item â†© âŒŠ3Ã·Ëœop {1 ğ•Š Â¯1 : itemÃ—2; 1 ğ•Š  ğ•© : item+ğ•©; 2 ğ•Š Â¯1 : itemâ‹†2; 2 ğ•Š  ğ•© : itemÃ—ğ•©} arg
    s â†© âŸ¨âˆ¾âŠ¸âŸ¨itemâŸ©âŸ©Ë™âŒ¾({0=test|item ? then :else}âŠ¸âŠ‘) s
  }Â¨noâŠ‘status
  s â†© âŸ¨âŸ©Ë™âŒ¾(noâŠ¸âŠ‘) s
}
lib.color.green lib.term.Println status â† init_status UpdaterÂ´ âŒ½monkeys

